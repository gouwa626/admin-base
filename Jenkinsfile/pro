#!groovy

// 在多分支构建下，严格规定Jenkinsfile只存在可以发版的分支上

// 引用在jenkins已经全局定义好的library
library 'ehl-pipeline-library'
def map = [:]

// 共享目录
map.put('COPY_DIR','/home/seafile-sync/1-运营平台产品线/uc-用户管理中心/3-正式版')

// 分支名称
map.put('BRANCH_NAME','master')
// 服务栈名称
map.put('STACK_NAME','gateway-admin-web-v2')

//镜像名称
map.put('IMAGE', 'registry.ehualu.com/oc/gateway-admin-web-v2')
map.put('VERSION',env.version)
map.put('DATE',env.date)
// 调用library中var目录下的build.groovy脚本
build(map)